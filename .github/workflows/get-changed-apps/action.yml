name: Get changed applications
description: Get information on changed applications

inputs:
  delimiter:
    description: 'Delimiter to use for string output. Does not apply to `changed_files`.'
    required: false
    default: ' '

outputs:
  changed_files:
    description: 'Paths of changed files.'

  entry_names:
    description: 'Entry names of changed applications.'

  folders:
    description: 'Root folder paths of changed applications.'

  slack_groups:
    description: 'Slack groups of changed applications.'

  urls:
    description: 'Root URLs of changed applications.'

runs:
  using: 'node16'
  main: '../../../script/github-actions/get-changed-apps.js'
  # steps:
  #   - name: Get changed file paths
  #     id: get-changed-files
  #     shell: bash
  #     run: |
  #       if [[ ${{ github.ref }} == 'refs/heads/main' ]]; then
  #           echo ::set-output name=changed_files::$(git diff-tree --no-commit-id --name-only -r ${{ github.sha }})
  #       else
  #         echo ::set-output name=changed_files::$(git diff --name-only origin/main...)
  #       fi

  #   - name: Get changed applications
  #     shell: bash
  #     run: node script/github-actions/get-changed-apps.js
  #     env:
  #       CHANGED_FILE_PATHS: ${{ steps.get-changed-files.outputs.changed_files }}
  