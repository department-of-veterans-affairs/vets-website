name: Continuous Deploy Production Deploy Test 1
on:
  push:
    branches:
      - 'staged-cd-json-error-3'

jobs:
  cd-prod-deploy:
    name: CD Production Deploy
    runs-on: ubuntu-latest
    steps:
      - name: Run CD Production Deploy workflow
        run: |
          curl -X POST \
          -H "Accept: application/vnd.github.v3+json" \
          -H "Authorization: token ${{ secrets.GITHUB_TOKEN }}" \
          https://api.github.com/repos/${{ github.repository }}/dispatches \
          -d "$(jq -n --arg sha "${{ github.sha }}" \
          --arg ref "${{ github.ref }}" \
          --arg msg "${{ github.event.head_commit.message }}" \
          --arg entry "disability-benefits" \
          '{event_type: "cd-production-deploy-test", client_payload: {github_sha: $sha, github_ref: $ref, github_message: $msg, entry_app: $entry}}')"
      