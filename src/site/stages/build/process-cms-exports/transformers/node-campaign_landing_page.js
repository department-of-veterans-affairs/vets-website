// Relative imports.
const {
  getDrupalValue,
  utcToEpochTime,
  createMetaTagArray,
} = require('./helpers');

const transform = entity => {
  return {
    changed: utcToEpochTime(getDrupalValue(entity.changed)),
    entityBundle: 'campaign_landing_page',
    entityMetatags: createMetaTagArray(entity.metatag.value),
    entityType: 'node',
    title: getDrupalValue(entity.title),
    fieldAdministration: entity.fieldAdministration?.[0],
    fieldBenefitCategories: entity.fieldBenefitCategories,
    fieldClpAudience: entity.fieldClpAudience?.[0],
    fieldClpConnectWithUs: entity.fieldClpConnectWithUs?.[0],
    fieldClpEventsHeader: getDrupalValue(entity.fieldClpEventsHeader),
    fieldClpEventsPanel: getDrupalValue(entity.fieldClpEventsPanel),
    fieldClpEventsReferences: entity.fieldClpEventsReferences,
    fieldClpFaqCta: entity.fieldClpFaqCta?.[0],
    fieldClpFaqPanel: getDrupalValue(entity.fieldClpFaqPanel),
    fieldClpFaqParagraphs: entity.fieldClpFaqParagraphs,
    fieldClpResources: entity.fieldClpResources,
    fieldClpResourcesCta: entity.fieldClpResourcesCta?.[0],
    fieldClpResourcesHeader: getDrupalValue(entity.fieldClpResourcesHeader),
    fieldClpResourcesIntroText: getDrupalValue(
      entity.fieldClpResourcesIntroText,
    ),
    fieldClpResourcesPanel: getDrupalValue(entity.fieldClpResourcesPanel),
    fieldClpSpotlightCta: entity.fieldClpSpotlightCta?.[0],
    fieldClpSpotlightHeader: getDrupalValue(entity.fieldClpSpotlightHeader),
    fieldClpSpotlightIntroText: getDrupalValue(
      entity.fieldClpSpotlightIntroText,
    ),
    fieldClpSpotlightLinkTeasers: entity.fieldClpSpotlightLinkTeasers,
    fieldClpSpotlightPanel: getDrupalValue(entity.fieldClpSpotlightPanel),
    fieldClpStoriesCta: entity.fieldClpStoriesCta?.[0] || [],
    fieldClpStoriesHeader: getDrupalValue(entity.fieldClpStoriesHeader),
    fieldClpStoriesIntro: getDrupalValue(entity.fieldClpStoriesIntro),
    fieldClpStoriesPanel: getDrupalValue(entity.fieldClpStoriesPanel),
    fieldClpStoriesTeasers: entity.fieldClpStoriesTeasers,
    fieldClpVideoPanel: getDrupalValue(entity.fieldClpVideoPanel),
    fieldClpVideoPanelHeader: getDrupalValue(entity.fieldClpVideoPanelHeader),
    fieldClpVideoPanelMoreVideo: entity.fieldClpVideoPanelMoreVideo?.[0],
    fieldClpWhatYouCanDoHeader: getDrupalValue(
      entity.fieldClpWhatYouCanDoHeader,
    ),
    fieldClpWhatYouCanDoIntro: getDrupalValue(entity.fieldClpWhatYouCanDoIntro),
    fieldClpWhatYouCanDoPromos: entity.fieldClpWhatYouCanDoPromos,
    fieldClpWhyThisMatters: getDrupalValue(entity.fieldClpWhyThisMatters),
    fieldHeroBlurb: getDrupalValue(entity.fieldHeroBlurb),
    fieldHeroImage: entity.fieldHeroImage?.[0],
    fieldMedia: entity.fieldMedia?.[0],
    fieldPrimaryCallToAction: entity.fieldPrimaryCallToAction?.[0],
    fieldSecondaryCallToAction: entity.fieldSecondaryCallToAction?.[0],
  };
};

module.exports = {
  filter: [
    'changed',
    'metatag',
    'moderation_state',
    'path',
    'title',
    'field_administration',
    'field_benefit_categories',
    'field_clp_audience',
    'field_clp_connect_with_us',
    'field_clp_events_header',
    'field_clp_events_panel',
    'field_clp_events_references',
    'field_clp_faq_cta',
    'field_clp_faq_panel',
    'field_clp_faq_paragraphs',
    'field_clp_resources',
    'field_clp_resources_cta',
    'field_clp_resources_header',
    'field_clp_resources_intro_text',
    'field_clp_resources_panel',
    'field_clp_spotlight_cta',
    'field_clp_spotlight_header',
    'field_clp_spotlight_intro_text',
    'field_clp_spotlight_link_teasers',
    'field_clp_spotlight_panel',
    'field_clp_stories_cta',
    'field_clp_stories_header',
    'field_clp_stories_intro',
    'field_clp_stories_panel',
    'field_clp_stories_teasers',
    'field_clp_video_panel',
    'field_clp_video_panel_header',
    'field_clp_video_panel_more_video',
    'field_clp_what_you_can_do_header',
    'field_clp_what_you_can_do_intro',
    'field_clp_what_you_can_do_promos',
    'field_clp_why_this_matters',
    'field_hero_blurb',
    'field_hero_image',
    'field_media',
    'field_primary_call_to_action',
    'field_secondary_call_to_action',
  ],
  transform,
};
