<div class="vads-u-border-top--2px vads-u-border-color--gray-light vads-u-padding-y--3 vads-u-padding-x--1">
  <!-- Mobile expand/collapse -->
  <button id="mobile-expand-search"
    class="vads-u-width--full vads-u-display--flex vads-u-margin--0 vads-u-padding-x--2 vads-u-justify-content--space-between vads-u-padding-y--2 vads-u-color--primary-darker vads-u-background-color--gray-lightest medium-screen:vads-u-display--none"
    type="button">
    Search resources and support
    <i id="sliders-icon" class="fa fa-sliders-h vads-u-font-size--base vads-u-color--primary-darker"
      aria-hidden="true"></i>
    <i id="times-icon" class="vads-u-display--none fa fa-times vads-u-font-size--base vads-u-color--primary-darker"
      aria-hidden="true"></i>
  </button>

  <!-- Search form -->
  <form
    class="vads-u-display--none vads-u-flex-direction--column vads-u-background-color--gray-lightest vads-u-margin--0 vads-u-padding--2 vads-u-border-top--1px vads-u-border-color--gray-light medium-screen:vads-u-border-top--0 medium-screen-vads-u-background-color--white medium-screen:vads-u-display--flex"
    id="resources-support-search" method="get" action="/resources/search">
    <fieldset class="fieldset-input vads-u-margin--0">
      <legend class="vads-u-font-size--md vads-u-font-family--serif">Search resources and support articles or all of
        VA.gov</legend>
      <label class="vads-u-visibility--screen-reader" for="website-section">Website section to search</label>
      <div
        class="form-radio-buttons vads-u-display--flex vads-u-flex-direction--column medium-screen:vads-u-display--block">
        <div class="radio-button vads-u-display--inline-block vads-u-margin-right--3">
          <input type="radio" name="path" checked id="search-within-resources-and-support" value="/resources/search" />
          <label for="search-within-resources-and-support">
            <span class="vads-u-visibility--screen-reader">Search within</span> Resources and support
          </label>
        </div>
        <div class="radio-button vads-u-display--inline-block">
          <input type="radio" name="path" id="search-all-of-va-dot-gov" value="/search" />
          <label for="search-all-of-va-dot-gov">
            <span class="vads-u-visibility--screen-reader">Search</span> All VA.gov
          </label>
        </div>
      </div>
    </fieldset>
    <label class="vads-u-margin-top--1" for="resources-and-support-query">Enter a keyword, phrase, or question</label>
    <div class="vads-u-display--flex vads-u-flex-direction--column medium-screen:vads-u-flex-direction--row">
      <div class="vads-l-col--12 vads-u-flex--1 vads-u-width--auto">
        <input type="text" required name="query" id="resources-and-support-query"
          class="usa-input vads-u-max-width--100 vads-u-width--full vads-u-height--full vads-u-margin--0">
      </div>
      <div
        class="vads-l-col--12 vads-u-flex--auto vads-u-width--full vads-u-margin-top--2 medium-screen:vads-u-margin-top--0 medium-screen:vads-u-width--auto">
        <button type="submit"
          class="usa-button vads-u-margin--0 vads-u-width--full vads-u-height--full medium-screen-vads-u-border-left-radius--0">
          <i class="fa fa-search"> </i> Search
        </button>
      </div>
    </div>
  </form>
</div>

<script>
  (function () {
    var form = document.getElementById('resources-support-search');
    var mobileExpandBtn = document.getElementById('mobile-expand-search');
    var slidersIcon = document.getElementById('sliders-icon');
    var timesIcon = document.getElementById('times-icon');

    // On mobile expand/collapse button click handler.
    if (mobileExpandBtn) {
      mobileExpandBtn.addEventListener('click', function (event) {
        // Make sure borders look correct.
        mobileExpandBtn.classList.toggle('vads-u-border-bottom-radius--0');
        form.classList.toggle('vads-u-border-bottom-radius--5px');

        // Toggle icons.
        if (slidersIcon) { slidersIcon.classList.toggle('vads-u-display--none'); }
        if (timesIcon) { timesIcon.classList.toggle('vads-u-display--none'); }

        // Toggle form being expanded on mobile.
        form.classList.toggle('vads-u-display--none');
      });
    }

    // On form submit handler.
    if (form) {
      form.addEventListener('submit', function (event) {
        var searchGlobally = document.getElementById('search-all-of-va-dot-gov');

        if (searchGlobally.checked) {
          form.action = '/search';
        }

        // Prevent the "path" form field from being included in the form data to keep the URL cleaner.
        // That field is only used to decide where to submit the search.
        searchGlobally.removeAttribute('name');
        document.getElementById('search-within-resources-and-support').removeAttribute('name');
      });
    }
  })();
</script>
