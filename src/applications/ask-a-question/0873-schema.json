{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "title": "IRIS Ask a Question",
  "type": "object",
  "definitions": {
    "date": {
      "pattern": "^(\\d{4}|XXXX)-(0[1-9]|1[0-2]|XX)-(0[1-9]|[1-2][0-9]|3[0-1]|XX)$",
      "type": "string"
    },
    "dateRange": {
      "type": "object",
      "properties": {
        "from": {
          "$ref": "#/definitions/date"
        },
        "to": {
          "$ref": "#/definitions/date"
        }
      }
    },
    "ssn": {
      "type": "string",
      "pattern": "^[0-9]{9}$"
    },
    "veteranServiceNumber": {
      "type": "string",
      "pattern": "^[A-Z]{0,2}\\d{5,8}$"
    },
    "email": {
      "type": "string",
      "maxLength": 256,
      "format": "email"
    },
    "phone": {
      "type": "string",
      "minLength": 10
    },
    "address": {
      "type": "object",
      "oneOf": [
        {
          "properties": {
            "country": {
              "type": "string",
              "enum": [
                "CAN"
              ]
            },
            "state": {
              "type": "string",
              "enum": [
                "AB",
                "BC",
                "MB",
                "NB",
                "NF",
                "NT",
                "NV",
                "NU",
                "ON",
                "PE",
                "QC",
                "SK",
                "YT"
              ]
            },
            "postalCode": {
              "type": "string",
              "maxLength": 10
            }
          }
        },
        {
          "properties": {
            "country": {
              "type": "string",
              "enum": [
                "MEX"
              ]
            },
            "state": {
              "type": "string",
              "enum": [
                "aguascalientes",
                "baja-california-norte",
                "baja-california-sur",
                "campeche",
                "chiapas",
                "chihuahua",
                "coahuila",
                "colima",
                "distrito-federal",
                "durango",
                "guanajuato",
                "guerrero",
                "hidalgo",
                "jalisco",
                "mexico",
                "michoacan",
                "morelos",
                "nayarit",
                "nuevo-leon",
                "oaxaca",
                "puebla",
                "queretaro",
                "quintana-roo",
                "san-luis-potosi",
                "sinaloa",
                "sonora",
                "tabasco",
                "tamaulipas",
                "tlaxcala",
                "veracruz",
                "yucatan",
                "zacatecas"
              ]
            },
            "postalCode": {
              "type": "string",
              "maxLength": 10
            }
          }
        },
        {
          "properties": {
            "country": {
              "type": "string",
              "enum": [
                "USA"
              ]
            },
            "state": {
              "type": "string",
              "enum": [
                "AL",
                "AK",
                "AS",
                "AZ",
                "AR",
                "AA",
                "AE",
                "AP",
                "CA",
                "CO",
                "CT",
                "DE",
                "DC",
                "FM",
                "FL",
                "GA",
                "GU",
                "HI",
                "ID",
                "IL",
                "IN",
                "IA",
                "KS",
                "KY",
                "LA",
                "ME",
                "MH",
                "MD",
                "MA",
                "MI",
                "MN",
                "MS",
                "MO",
                "MT",
                "NE",
                "NV",
                "NH",
                "NJ",
                "NM",
                "NY",
                "NC",
                "ND",
                "MP",
                "OH",
                "OK",
                "OR",
                "PW",
                "PA",
                "PR",
                "RI",
                "SC",
                "SD",
                "TN",
                "TX",
                "UT",
                "VT",
                "VI",
                "VA",
                "WA",
                "WV",
                "WI",
                "WY"
              ]
            },
            "postalCode": {
              "type": "string",
              "maxLength": 10
            }
          }
        },
        {
          "properties": {
            "country": {
              "not": {
                "type": "string",
                "enum": [
                  "CAN",
                  "MEX",
                  "USA"
                ]
              }
            },
            "state": {
              "type": "string",
              "maxLength": 51
            },
            "postalCode": {
              "type": "string",
              "maxLength": 51
            }
          }
        }
      ],
      "properties": {
        "street": {
          "type": "string",
          "minLength": 1,
          "maxLength": 50
        },
        "street2": {
          "type": "string",
          "minLength": 1,
          "maxLength": 50
        },
        "city": {
          "type": "string",
          "minLength": 1,
          "maxLength": 51
        }
      }
    },
    "topic": {
      "type": "object",
      "oneOf": [
        {
          "properties": {
            "levelOne": {
              "type": "string",
              "enum": [
                "Caregiver Support Program"
              ]
            },
            "levelTwo": {
              "type": "string",
              "enum": [
                "General Caregiver Support/Education",
                "Comprehensive Family Caregiver Program",
                "VA Supportive Services"
              ]
            }
          }
        },
        {
          "properties": {
            "levelOne": {
              "type": "string",
              "enum": [
                "Health & Medical Issues & Services"
              ]
            },
            "levelTwo": {
              "type": "object",
              "oneOf": [
                {
                  "properties": {
                    "subLevelTwo": {
                      "type": "string",
                      "enum": ["Health/Medical Eligibility & Programs"]
                    },
                    "topicThree": {
                      "type": "string",
                      "enum": [
                        "Apply for Health Benefits (Veterans)",
                        "Medical Care for Veterans within USA",
                        "Medical Care-Overseas Vets (Foreign Med)",
                        "Children of Women Vietnam Vets Healthcare",
                        "Apply for Health Benefits (Dependents)",
                        "CHAMPVA-Civilian Health & Medical Prog",
                        "CHAMPVA Password/Access Problems",
                        "CHAMPVA CITI (In house Treatment Initiated)",
                        "Spina Bifida Program for Children of Vet",
                        "Licensed Health Professional Employment"
                      ]
                    }
                  }
                },
                {
                  "properties": {
                    "subLevelTwo": {
                      "type": "string",
                      "enum": ["Prosthetics, Med Devices & Sensory Aids"]
                    },
                    "topicThree": {
                      "type": "string",
                      "enum": [
                        "Artificial Limbs/Orthotics",
                        "Automobile Adaptive Equipment",
                        "Clothing Allowance",
                        "Durable Medical Equipment",
                        "Eyeglasses",
                        "Hearing Aids",
                        "Home Improvements & Structural Alteratio",
                        "Home Oxygen",
                        "Wheelchairs",
                        "Prosthetics Web Site",
                        "Technical Problems",
                        "Other Prosthetics Issues"
                      ]
                    }
                  }
                },
                {
                  "properties": {
                    "subLevelTwo": {
                      "type": "string",
                      "enum": ["Women Veterans Health Care"]
                    },
                    "topicThree": {
                      "type": "string",
                      "enum": [
                        "General Concern"
                      ]
                    }
                  }
                }
              ],
              "enum": [
                "Medical Care Issues at Specific Facility",
                "Health/Medical Eligibility & Programs",
                "My HealtheVet",
                "Prosthetics, Med Devices & Sensory Aids",
                "Vet Center / Readjustment Counseling Service (RCS)",
                "Women Veterans Health Care"
              ]
            }
          }
        },
        {
          "properties": {
            "levelOne": {
              "type": "string",
              "enum": [
                "VA Ctr for Women Vets, Policies & Progs"
              ]
            },
            "levelTwo": {
              "type": "string",
              "enum": [
                "Policy Questions",
                "Question about Women Veterans Programs"
              ]
            }
          }
        }
      ]
    },
    "privacyAgreementAccepted": {
      "type": "boolean",
      "enum": [
        true
      ]
    }
  },
  "additionalProperties": false,
  "anyOf": [
    {
      "required": [
        "email"
      ]
    },
    {
      "required": [
        "phone"
      ]
    },
    {
      "required": [
        "address"
      ]
    }
  ],
  "required": [
    "fullName",
    "preferredContactMethod",
    "topic",
    "inquiryType",
    "query",
    "veteranStatus"
  ],
  "properties": {
    "fullName": {
      "type": "object",
      "properties": {
        "first": {
          "type": "string",
          "minLength": 1,
          "maxLength": 30
        },
        "last": {
          "type": "string",
          "minLength": 1,
          "maxLength": 30
        },
        "suffix": {
          "type": "string",
          "enum": [
            "Jr.",
            "Sr.",
            "II",
            "III",
            "IV"
          ]
        }
      },
      "required": [
        "first",
        "last"
      ]
    },
    "preferredContactMethod": {
      "default": "email",
      "type": "string",
      "enum": [
        "email",
        "phone",
        "mail"
      ],
      "enumNames": [
        "Email (Recommended)",
        "Phone",
        "US Mail"
      ]
    },
    "inquiryType": {
      "type": "string",
      "enum": [
        "Question",
        "Compliment",
        "Service Complaint",
        "Suggestion",
        "Status of Claim",
        "Status of Appeal at a Local VA Office",
        "Status of Appeals at BVA, Wash DC"
      ]
    },
    "query": {
      "type": "string"
    },
    "veteranInformation": {
      "type": "object",
      "required": [],
      "properties": {
        "dateOfBirth": {
          "$ref": "#/definitions/date"
        },
        "socialSecurityNumber": {
          "$ref": "#/definitions/ssn"
        },
        "serviceNumber": {
          "type": "string",
          "pattern": "^\\d{0,12}$"
        },
        "claimNumber": {
          "type": "string",
          "pattern": "^\\d{6,8}$"
        },
        "serviceDateRange": {
          "$ref": "#/definitions/dateRange"
        }
      }
    },
    "veteranStatus": {
      "type": "object",
      "required": [
        "veteranStatus"
      ],
      "properties": {
        "veteranStatus": {
          "type": "string",
          "enum": [
            "vet",
            "behalf of vet",
            "dependent",
            "general"
          ],
          "enumNames": [
            "For myself as a Veteran",
            "On behalf of a Veteran",
            "For the dependent of a Veteran",
            "A general question"
          ]
        },
        "isDependent": {
          "type": "boolean"
        },
        "relationshipToVeteran": {
          "type": "string",
          "enum": [
            "Attorney",
            "Authorized 3rd Party",
            "Daughter",
            "Dependent Child",
            "Ex-spouse",
            "Father",
            "Funeral Director",
            "General Question; Not Applicable",
            "Guardian/Fiduciary",
            "Helpless Child",
            "Mother",
            "Other",
            "Sibling",
            "Son",
            "Spouse",
            "Surviving Spouse",
            "Veteran",
            "VSO"
          ]
        },
        "veteranIsDeceased": {
          "type": "boolean"
        },
        "dateOfDeath": {
          "$ref": "#/definitions/date"
        },
        "branchOfService": {
          "type": "string",
          "enum": [
            "Air Force",
            "Air Force Reserves",
            "Air Force National Guard",
            "Air Force Nursing Corps (AFNC)",
            "Army",
            "Army National Guard",
            "Army Reserves",
            "Coast Guard",
            "Coast Guard Women's Reserve (SPARS)",
            "Environmental Services Administration",
            "Marine Corps",
            "Marine Corps Reserves",
            "Natl Oceanic & Atmospheric Admin (NOAA)",
            "Navy",
            "Navy Reserves",
            "Navy Nursing Corps (NNC)",
            "Philippines Guerilla",
            "Philippines Scout",
            "Public Health Service",
            "U. S. Merchant Marine",
            "Women's Air Force Service Pilots (WASPS)",
            "Women's Army Auxiliary Corps (WAAC)",
            "Women's Army Corps (WACs)",
            "Womens Voluntary Emerg Srv (WAVES)",
            "Other"
          ]
        }
      }
    },
    "email": {
      "$ref": "#/definitions/email"
    },
    "phone": {
      "$ref": "#/definitions/phone"
    },
    "topic": {
      "$ref": "#/definitions/topic"
    },
    "address": {
      "$ref": "#/definitions/address"
    },
    "privacyAgreementAccepted": {
      "$ref": "#/definitions/privacyAgreementAccepted"
    }
  }
}
