const { format } = require('date-fns');

const generateCCD = (req, res) => {
  const randomSeed = Math.floor(Math.random() * 2);

  // SUCCESSFUL GENERATION
  return res.json([
    {
      dateGenerated: `${format(new Date(), "u-MM-dd'T'HH:mm:ss.SSSXX")}`,
      status: randomSeed > 0 ? 'COMPLETE' : 'IN_PROCESS',
      patientId: '1012740024V936776',
    },
    {
      dateGenerated: '2024-10-30T10:00:40.000-0400',
      status: 'COMPLETE',
      patientId: '1012740024V936776',
    },
  ]);

  // ERROR IN REPORT
  // return res.json([
  //   {
  //     dateGenerated: `${format(new Date(), "u-MM-dd'T'HH:mm:ss.SSSXX")}`,
  //     status: 'ERROR',
  //     patientId: '1012740024V936776',
  //   },
  //   {
  //     dateGenerated: '2024-10-30T10:00:40.000-0400',
  //     status: 'COMPLETE',
  //     patientId: '1012740024V936776',
  //   },
  // ]);
};

const downloadCCD = (req, res) => {
  return res.type('application/xml').send(
    `<?xml version="1.0"  encoding="UTF-8" standalone="no"?>
    <?xml-stylesheet type="text/xsl" href="cda.xsl"?>
    <ClinicalDocument xmlns="urn:hl7-org:v3" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:hl7-org:v3 CDA.xsd"><!--
            *****************************************************
            C-CDA R2.1 CONTINUITY OF CARE DOCUMENT (CCD) JHIE 4.7
            *****************************************************
          --><realmCode code="US" /><typeId root="2.16.840.1.113883.1.3" extension="POCD_HD000040" /><templateId root="2.16.840.1.113883.10.20.22.1.1" extension="2015-08-01" /><templateId root="2.16.840.1.113883.10.20.22.1.2" extension="2015-08-01" /><!-- CCD Document Identifer, id=VA OID, extension=system-generated --><id extension="fdab91d2-b0dc-11ef-89b3-06269a7b925d" root="2.16.840.1.113883.4.349" /><!--CCD Document Code--><code code="34133-9" codeSystem="2.16.840.1.113883.6.1" codeSystemName="LOINC" displayName="Summary of episode note" /><!-- CCD Document Title --><title>VA Continuity of Care Document (CCD)</title><!-- 1.01 DOCUMENT TIMESTAMP, REQUIRED --><effectiveTime value="20241202123247" /><!--CCD Confidentiality Code, REQUIRED --><confidentialityCode code="N" codeSystem="2.16.840.1.113883.5.25" codeSystemName="ConfidentialityCode" /><!--CCD DOCUMENT LANGUAGE, REQUIRED--><languageCode code="en-US" /><versionNumber value="2" /><recordTarget><patientRole><!--1.02 PERSON ID, REQUIRED, id=VA OID, extension=GUID--><id root="2.16.840.1.113883.4.349" extension="1012740024V936776" /><!-- 1.03 PERSON ADDRESS-HOME PERMANENT, REQUIRED --><addr use="HP"><streetAddressLine>4002 Crutchfield St</streetAddressLine><city>Richmond</city><state>VA</state><postalCode>23225-4755</postalCode></addr><!--1.04 PERSON PHONE/EMAIL/URL, REQUIRED--><telecom use="HP" value="tel:(502)333-9999" /><telecom use="WP" value="tel:(000)0000000" /><telecom use="MC" value="tel:(000) 000-0000" /><telecom value="mailto:MCPEAK@hotmail.com" /><patient><!--1.05 PERSON NAME LEGAL, REQUIRED--><name use="L"><family>IPOACEVEDA</family><given>DEWAYNE</given><given>DEAN</given></name><!--1.05 PERSON NAME Alias Name, Optional--><!-- 1.06 GENDER, REQUIRED, HL7 Administrative Gender --><administrativeGenderCode codeSystem="2.16.840.1.113883.5.1" codeSystemName="AdministrativeGenderCode" code="M" displayName="Male"><originalText>M</originalText></administrativeGenderCode><!--1.07 PERSON DATE OF BIRTH, REQUIRED--><birthTime value="19460911000000" /><!--1.08 MARITAL STATUS, Optional-R2--><maritalStatusCode code="M" displayName="Married" codeSystem="2.16.840.1.113883.5.2" codeSystemName="MaritalStatusCode"><originalText>Married</originalText><!--1.08 MARITAL STATUS, Optional-R2--></maritalStatusCode><!-- 1.09 RELIGIOUS AFFILIATION, Optional, Removed b/c data not yet available via VA VIstA RPCs --><religiousAffiliationCode nullFlavor="UNK"><originalText>Nazarene</originalText></religiousAffiliationCode><!--1.10 RACE, Optional--><raceCode nullFlavor="NA"><originalText>Declined to Answer</originalText></raceCode><!--1.11 ETHNICITY, Optional--><ethnicGroupCode code="2186-5" displayName="Not Hispanic or Latino" codeSystem="2.16.840.1.113883.6.238" codeSystemName="Race &amp; Ethnicity - CDC"><originalText>Not Hispanic or Latino</originalText></ethnicGroupCode><!--********************************************************** LANGUAGE SPOKEN CONTENT MODULE, R2 **********************************************************--><!--2.01 LANGUAGE, REQUIRED, languageCode ISO 639-1--><languageCommunication><languageCode nullFlavor="UNK" /><modeCode nullFlavor="NA" /><proficiencyLevelCode nullFlavor="NA" /><preferenceInd nullFlavor="NA" /></languageCommunication></patient></patientRole></recordTarget><!--
            ********************************************************************** INFORMATION SOURCE CONTENT MODULE, REQUIRED **********************************************************************
          --><!--AUTHOR SECTION (REQUIRED) OF INFORMATION SOURCE CONTENT MODULE --><author><templateId root="2.16.840.1.113883.10.20.22.4.119" /><!--10.01 AUTHOR TIME (=Document Creation Date), REQUIRED --><time value="20241202123247" /><assignedAuthor><!--10.02 AUTHOR ID (VA OID) (authorOID), REQUIIRED --><id nullFlavor="NA" /><code nullFlavor="UNK" /><addr nullFlavor="UNK" /><!--Assigned Author Telecom Required, but VA VistA data not yet available --><telecom nullFlavor="NA" /><!--
                10.02 AUTHOR NAME REQUIRED assignedPerson/Author Name REQUIRED but provided as representedOrganization
              --><assignedPerson><name>Department of Veterans Affairs (VA)</name></assignedPerson><!--10.02 AUTHOR NAME REQUIRED as representedOrganization --><representedOrganization><!--
                  10.02 AUTHORING DEVICE ORGANIZATION OID (VA OID) (deviceOrgOID), REQUIRED
                --><id root="2.16.840.1.113883.4.349" /><!--10.02 AUTHORING DEVICE ORGANIZATION NAME (deviceOrgName), REQUIRED --><name>Department of Veterans Affairs (VA)</name><!--Assigned Author Telecom Required, but VA VistA data not yet available--><telecom nullFlavor="NA" /><!--Assigned Author Address Required, but VA VistA data not yet available --><addr use="WP"><streetAddressLine>810 Vermont Avenue, NW</streetAddressLine><city>Washington</city><state>DC</state><postalCode>20420</postalCode><country>US</country></addr></representedOrganization></assignedAuthor></author><!--
            ******************************************************************************************* INFORMANT SECTION (AS AN ORGANIZATION), Optional *******************************************************************************************
          --><informant><assignedEntity><id nullFlavor="NI" /><addr nullFlavor="NA" /><telecom nullFlavor="NA" /><assignedPerson><!--Name Required for informant/assignedEntity/assignedPerson --><name>Department of Veterans Affairs (VA)</name></assignedPerson></assignedEntity></informant><!--
            ********************************************************************************* CUSTODIAN AS AN ORGANIZATION, REQUIRED **********************************************************************************
          --><custodian><assignedCustodian><representedCustodianOrganization><!--CUSTODIAN OID (VA OID)--><id root="2.16.840.1.113883.4.349" /><!--CUSTODIAN NAME--><name>Department of Veterans Affairs (VA)</name><!--Telecom Required for representedOrganization, but VA VistA data not yet available --><telecom nullFlavor="NA" /><addr><streetAddressLine>810 Vermont Avenue NW</streetAddressLine><city>Washington</city><state>DC</state><postalCode>20420</postalCode><country>US</country></addr></representedCustodianOrganization></assignedCustodian></custodian><!--
            *************************************************************************** LEGAL AUTHENTICATOR (AS AN ORGANIZATION), Optional ***************************************************************************
          --><legalAuthenticator><!--TIME OF AUTHENTICATION --><time value="20241202123247" /><signatureCode code="S" /><assignedEntity><id nullFlavor="NI" /><code nullFlavor="NI" /><addr><streetAddressLine>810 Vermont Avenue NW</streetAddressLine><city>Washington</city><state>DC</state><postalCode>20420</postalCode><country>US</country></addr><telecom nullFlavor="NA" /><assignedPerson><name>Department of Veterans Affairs (VA)</name></assignedPerson><representedOrganization><!-- LEGAL AUTHENTICATOR OID (VA) --><id root="2.16.840.1.113883.4.349" /><name>Department of Veterans Affairs (VA)</name><addr><streetAddressLine>810 Vermont Avenue NW</streetAddressLine><city>Washington</city><state>DC</state><postalCode>20420</postalCode><country>US</country></addr></representedOrganization></assignedEntity></legalAuthenticator><!--
            ******************************************************************** SUPPORT INFORMATION CONTENT MODULE, Optional ********************************************************************
          --><participant typeCode="IND"><!-- 3.01 DATE, REQUIRED --><!--
            3.01 DATE date as nullFlavor b/c data not yet available via VA VistA RPCs
          --><time nullFlavor="UNK" /><!-- 3.02 CONTACT TYPE, REQUIRED, classCode value determined by VistA value in contactType --><associatedEntity classCode="NOK"><code codeSystem="2.16.840.1.113883.5.111" codeSystemName="RoleCode" nullFlavor="UNK"><originalText>UNRELATED FRIEND/OTHER</originalText></code><!-- 3.04 CONTACT Addresss, Home Permanent, Optional-R2 --><addr nullFlavor="NI" /><!--
              3.05 CONTACT PHONE/EMAIL/URL, Optional-R2, Removed b/c data not yet
              available via VA VistA RPCs
            --><telecom use="HP" value="tel:8888888888" /><associatedPerson><!-- 3.06 CONTACT NAME, REQUIRED --><name><family>ACEVEDO</family><given>CURT</given></name></associatedPerson></associatedEntity></participant><participant typeCode="IND"><!-- 3.01 DATE, REQUIRED --><!--
            3.01 DATE date as nullFlavor b/c data not yet available via VA VistA RPCs
          --><time nullFlavor="UNK" /><!-- 3.02 CONTACT TYPE, REQUIRED, classCode value determined by VistA value in contactType --><associatedEntity classCode="ECON"><code codeSystem="2.16.840.1.113883.5.111" codeSystemName="RoleCode" nullFlavor="UNK"><originalText>UNRELATED FRIEND/OTHER</originalText></code><!-- 3.04 CONTACT Addresss, Home Permanent, Optional-R2 --><addr nullFlavor="NI" /><!--
              3.05 CONTACT PHONE/EMAIL/URL, Optional-R2, Removed b/c data not yet
              available via VA VistA RPCs
            --><telecom use="HP" value="tel:8888888888" /><associatedPerson><!-- 3.06 CONTACT NAME, REQUIRED --><name><family>ACEVEDO</family><given>CURT</given></name></associatedPerson></associatedEntity></participant><!--
            ******************************************************************************* DOCUMENTATION OF MODULE - QUERY META DATA, Optional *******************************************************************************
          --><documentationOf><serviceEvent classCode="PCPR"><effectiveTime><low value="19460911000000" /><high value="20241202123247" /></effectiveTime><performer typeCode="PRF"><!-- ****** PRIMARY HEALTHCARE PROVIDER MODULE, Optional ********* --><!-- 4.02 PROVIDER ROLE CODED, optional --><templateId root="2.16.840.1.113883.10.20.6.2.1" extension="2014-06-09" /><functionCode code="PCP" codeSystem="2.16.840.1.113883.5.88" codeSystemName="ParticipationFunction" displayName="PRIMARY CARE PROVIDER"><originalText>Primary Care Provider</originalText></functionCode><assignedEntity><!-- Provider ID from Problems Module (7.05Treating Provider ID) --><id nullFlavor="NI" /><!--4.04 PROVIDER TYPE, optional, NUCC --><code code="2080P0204X" codeSystem="2.16.840.1.113883.6.101" codeSystemName="NUCC" displayName="Allopathic &amp; Osteopathic Physicians" /><!-- Address Required for assignedEntity --><addr use="WP"><state>WV</state></addr><!-- Telecom Required for iassignedEntity, but VA VistA data not yet available --><telecom nullFlavor="NA" /><!-- 4.07-PROVIDER NAME, REQUIRED --><assignedPerson><name>DIXSON, JESS</name></assignedPerson><representedOrganization><!-- INFORMATION SOURCE FOR FACILITY ID=VA OID, EXT= VAMC TREATING FACILITY NBR --><id root="2.16.840.1.113883.4.349" extension="451" /><!--INFORMATION SOURCE NAME, name=VAMC TREATING FACILITY NAME --><name>IPOTEST 1</name><!-- Telecom Required for representedOrganization, but VA VistA data not yet available --><telecom nullFlavor="UNK" /><!-- Address Required for representedOrganization, but VA VistA data not yet available --><addr nullFlavor="UNK" /></representedOrganization></assignedEntity></performer></serviceEvent></documentationOf><!--******************************************************** CDA BODY ******************************************************** --><component><structuredBody><!--Insurance Providers --><component><!--
                  ********************************************************************************** INSURANCE PROVIDERS (PAYERS) SECTION, Optional **********************************************************************************
                --><section nullFlavor="NI"><templateId root="2.16.840.1.113883.10.20.22.2.18" extension="2015-08-01" /><code code="48768-6" codeSystem="2.16.840.1.113883.6.1" codeSystemName="LOINC" displayName="Payment sources" /><title>Insurance Providers: All on record at VA</title><text>No Data Provided for This Section</text></section></component><component><!-- ******************************************************** ADVANCED DIRECTIVE SECTION, REQUIRED ******************************************************** --><section nullFlavor="NI"><!-- C-CDA Advanced Directive Section Template Entries REQUIRED --><templateId root="2.16.840.1.113883.10.20.22.2.21.1" extension="2015-08-01" /><templateId root="2.16.840.1.113883.10.20.22.2.21" /><code code="42348-3" codeSystem="2.16.840.1.113883.6.1" codeSystemName="LOINC" displayName="Advance Directives" /><title>Advance Directives: All on record at VA</title><!--ADVANCED DIRECTIVES NARRATIVE BLOCK --><text>No Data Provided for This Section</text></section></component><component><!-- ************************************************************* ALLERGY/DRUG SECTION SECTION, REQUIRED ************************************************************* --><section nullFlavor="NI"><!--ALLERGY/DRUG Section Template Entries REQUIRED --><templateId root="2.16.840.1.113883.10.20.22.2.6.1" extension="2015-08-01" /><templateId root="2.16.840.1.113883.10.20.22.2.6" /><code code="48765-2" codeSystem="2.16.840.1.113883.6.1" codeSystemName="LOINC" displayName="Allergies and/or Adverse Reactions" /><title>Allergies and Adverse Reactions (ADRs): All on record at VA</title><!-- ALLERGIES NARRATIVE BLOCK --><text>No Data Provided for This Section</text></section></component><component><!-- ******************************************************** ENCOUNTER SECTION, Optional ******************************************************** --><section nullFlavor="NI"><templateId root="2.16.840.1.113883.10.20.22.2.22.1" extension="2015-08-01" /><templateId root="2.16.840.1.113883.10.20.22.2.22" /><code code="46240-8" codeSystem="2.16.840.1.113883.6.1" codeSystemName="LOINC" displayName="Hospitalizations and Outpatient Visits" /><title>Encounters: Outpatient Encounters with Notes</title><text>No Data Provided for This Section</text></section></component><!-- ********************************************* FUNCTIONAL STATUS, OMIT from SES ************************************* --><component><section nullFlavor="NI"><templateId root="2.16.840.1.113883.10.20.22.2.14" extension="2014-06-09" /><code code="47420-5" codeSystem="2.16.840.1.113883.6.1" codeSystemName="LOINC" displayName="Functional Status" /><title>Functional Status: Functional Independence Measurement (FIM) Scores</title><text>No Data Provided for This Section</text></section></component><component><!-- **************************************************************** MEDICATIONS (RX & Non-RX) SECTION, REQUIRED **************************************************************** --><section nullFlavor="NI"><!-- C-CDA Medications Section Template Entries REQUIRED --><templateId root="2.16.840.1.113883.10.20.22.2.1.1" extension="2014-06-09" /><templateId root="2.16.840.1.113883.10.20.22.2.1" /><code code="10160-0" codeSystem="2.16.840.1.113883.6.1" codeSystemName="LOINC" displayName="History of medication use" /><title>Medications: VA Dispensed and Non-VA Documented (Obtained Outside VA)</title><!-- MEDICATIONS NARRATIVE BLOCK --><text>No Data Provided for This Section</text></section></component><!-- Immunizations section --><component><!-- ******************************************************** IMMUNIZATIONS SECTION, Optional ******************************************************** --><section nullFlavor="NI"><!-- CCD Immunization Section Entries REQUIRED --><templateId root="2.16.840.1.113883.10.20.22.2.2.1" extension="2015-08-01" /><templateId root="2.16.840.1.113883.10.20.22.2.2" /><code code="11369-6" codeSystem="2.16.840.1.113883.6.1" codeSystemName="LOINC" displayName="Immunization" /><title>Immunizations: All on record at VA</title><text>No Data Provided for This Section</text></section></component><!-- Procedures section --><component><!-- ******************************************************** PROCEDURES SECTION ******************************************************** --><section nullFlavor="NI"><!-- CCD Procedures Section Entries REQUIRED --><templateId root="2.16.840.1.113883.10.20.22.2.7.1" extension="2014-06-09" /><code code="47519-4" codeSystem="2.16.840.1.113883.6.1" codeSystemName="LOINC" displayName="History of procedures" /><title>Procedures: Surgical Procedures with Notes</title><!-- PROCEDURE NARRATIVE BLOCK --><text>No Data Provided for This Section</text></section></component><component><!-- ******************************************************** PLAN OF CARE SECTION, Optional ******************************************************** --><section nullFlavor="NI"><!-- CCD Plan of Care Section Entries --><templateId root="2.16.840.1.113883.10.20.22.2.10" extension="2014-06-09" /><code code="18776-5" codeSystem="2.16.840.1.113883.6.1" codeSystemName="LOINC" displayName="Plan of care note" /><title>Plan of Treatment: Future Appointments and Active/Pending Orders</title><text>No Data Provided for This Section</text></section></component><component><!-- ******************************************************** PROBLEM/CONDITION SECTION, REQUIRED ******************************************************** --><section nullFlavor="NI"><!-- C-CDA Problem Section Template. Entries REQUIRED --><templateId root="2.16.840.1.113883.10.20.22.2.5.1" extension="2015-08-01" /><templateId root="2.16.840.1.113883.10.20.22.2.5" /><code code="11450-4" codeSystem="2.16.840.1.113883.6.1" codeSystemName="LOINC" displayName="Problem List" /><title>Problems (Conditions): All on record at VA</title><!-- PROBLEMS NARRATIVE BLOCK --><text>No Data Provided for This Section</text></section></component><component><!-- ******************************************************** RESULTS SECTION, REQUIRED ******************************************************** --><section nullFlavor="NI"><!-- CCD Results Section Entries REQUIRED --><templateId root="2.16.840.1.113883.10.20.22.2.3.1" extension="2015-08-01" /><templateId root="2.16.840.1.113883.10.20.22.2.3" /><code code="30954-2" codeSystem="2.16.840.1.113883.6.1" codeSystemName="LOINC" displayName="Relevant diagnostic tests and/or laboratory data" /><title>Results: Chemistry and Hematology</title><text>No Data Provided for This Section</text></section></component><component><!-- ******************************************************** SOCIAL HISTORY SECTION, Optional ******************************************************** --><section nullFlavor="NI"><!-- CCD Social History Section Entries --><templateId root="2.16.840.1.113883.10.20.22.2.17" extension="2015-08-01" /><code code="29762-2" codeSystem="2.16.840.1.113883.6.1" codeSystemName="LOINC" displayName="Social History" /><title>Social History: All on record at VA</title><text>No Data Provided for This Section</text></section></component><component><!-- ******************************************************** VITAL SIGNS SECTION, REQUIRED ******************************************************** --><section><!-- C-CDA CCD VITAL SIGNS Section Template Entries REQUIRED --><templateId root="2.16.840.1.113883.10.20.22.2.4.1" extension="2015-08-01" /><templateId root="2.16.840.1.113883.10.20.22.2.4" /><code code="8716-3" codeSystem="2.16.840.1.113883.6.1" codeSystemName="LOINC" displayName="Vital Signs" /><title>Vital Signs</title><!-- VITAL SIGNS NARRATIVE BLOCK, REQUIRED --><text><paragraph><content ID="vitalsTime">
                            The included list of inpatient and outpatient Vital Signs is from the last 12 months and includes a maximum of the 5 most recent sets of vital sign values. If more than one set of vitals was taken on the same date, only the most recent set is populated for that date. The data comes from all VA treatment facilities. Vital Sign information from the new VA electronic health record is not included.
                          </content></paragraph><table><thead><tr><th>Date/Time</th><th>Temperature</th><th>Pulse</th><th>Blood Pressure</th><th>Respiratory Rate</th><th>SP02</th><th>Pain</th><th>Height</th><th>Weight</th><th>Body Mass Index</th><th>Source</th></tr></thead><tbody><tr><td>Aug 29, 2024 12:57 PM</td><td>99 </td><td>77 </td><td /><td>22 </td><td /><td /><td /><td /><td /><td><content ID="vndSource1">CHEYENNE VAMC</content></td></tr></tbody></table><!-- CDA Observation Text as a Reference tag --><content ID="vital1" revised="delete">Vital Sign Observation Text Not Available</content></text><!--  VITAL SIGNS STRUCTURED DATA --><entry typeCode="DRIV"><observation classCode="OBS" moodCode="EVN"><templateId root="2.16.840.1.113883.10.20.22.4.201" extension="2016-06-01" /><code code="82607-3" codeSystem="2.16.840.1.113883.6.1" displayName="Section Date and Time Range" /><text><reference value="#vitalsTime" /></text><statusCode code="completed" /><value xsi:type="IVL_TS"><low value="20231202123247" /><high value="20241202123247" /></value></observation></entry><entry typeCode="DRIV"><!--  Vital Signs Organizer Template, REQUIRED --><organizer classCode="CLUSTER" moodCode="EVN"><templateId root="2.16.840.1.113883.10.20.22.4.26" extension="2015-08-01" /><!-- CCD Vital Signs Organizer ID as Section LOINC Code.StationNbr.GroupID --><id root="2.16.840.1.113883.4.349" extension="74728-7.442.3240829.125752" /><code code="46680005" codeSystem="2.16.840.1.113883.6.96" codeSystemName="SNOMED CT" displayName="Vital signs"><translation code="74728-7" codeSystem="2.16.840.1.113883.6.1" /></code><statusCode code="completed" /><effectiveTime><low value="20240829125752" /><high value="20240829125752" /></effectiveTime><!-- INFORMATION SOURCE FOR VITAL SIGN ORGANIZER/PANEL, Optional --><author><templateId root="2.16.840.1.113883.10.20.22.4.119" /><time nullFlavor="NA" /><assignedAuthor><id nullFlavor="NI" /><representedOrganization><!-- INFORMATION SOURCE ID, root=VA OID, extension= VAMC TREATING FACILITY NBR --><id root="2.16.840.1.113883.4.349" extension="442" /><!--INFORMATION SOURCE NAME, name=VAMC TREATING FACILITY NAME --><name>CHEYENNE VAMC</name></representedOrganization></assignedAuthor></author><!--One component block for each Vital Sign --><component><observation classCode="OBS" moodCode="EVN"><templateId root="2.16.840.1.113883.10.20.22.4.27" extension="2014-06-09" /><!--CCD Vital Signs Observation ID as Section LOINC Code.StationNbr.GroupID.ExternalId.ObservationCode--><id root="2.16.840.1.113883.4.349" extension="8716-3.442.3240829.125752..8310-5" /><!--14.03-VITAL SIGN RESULT TYPE, REQUIRED, LOINC --><code codeSystem="2.16.840.1.113883.6.1" codeSystemName="LOINC" code="8310-5" displayName="Body temperature"><originalText>TEMPERATURE</originalText><translation code="4500638" displayName="TEMPERATURE" codeSystem="2.16.840.1.113883.6.233" codeSystemName="VHA Enterprise Reference Terminology" /></code><text><reference nullFlavor="UNK" /></text><!-- 14.04-VITAL SIGN RESULT STATUS, REQUIRED, Static value of completed --><statusCode code="completed" /><!-- 14.02-VITAL SIGN RESULT DATE/TIME, REQURIED --><effectiveTime value="20240829125752" /><!--
              14.05-VITAL SIGN RESULT VALUE, CONDITIONALLY REQUIRED when
              moodCode=EVN
            --><!-- 14.05-VITAL SIGN RESULT VALUE with Unit of Measure --><value xsi:type="PQ" nullFlavor="NA" value="99"><translation code="" codeSystem="2.16.840.1.113883.4.349" codeSystemName="Department of Veterans Affairs VistA" displayName="" /></value><interpretationCode nullFlavor="NI" /><!--
              14.06-VITAL SIGN RESULT INTERPRETATION, Optional, HL7 Result
              Normalcy Status Value Set
            --><!--
              14.06-VITAL SIGN RESULT INTERPRETATION, Removed b/c data not
              yet available via VA VistA RPCs
            --><!-- 14.07-VITAL SIGN RESULT REFERENCE RANGE, Optional, --><!--
              14.07-VITAL SIGN RESULT REFERENCE RANGE, Removed b/c data not
              yet available via VA VistA RPCs
            --></observation></component><component><observation classCode="OBS" moodCode="EVN"><templateId root="2.16.840.1.113883.10.20.22.4.27" extension="2014-06-09" /><!--CCD Vital Signs Observation ID as Section LOINC Code.StationNbr.GroupID.ExternalId.ObservationCode--><id root="2.16.840.1.113883.4.349" extension="8716-3.442.3240829.125752..8867-4" /><!--14.03-VITAL SIGN RESULT TYPE, REQUIRED, LOINC --><code codeSystem="2.16.840.1.113883.6.1" codeSystemName="LOINC" code="8867-4" displayName="Heart rate"><originalText>PULSE</originalText><translation code="4500636" displayName="PULSE" codeSystem="2.16.840.1.113883.6.233" codeSystemName="VHA Enterprise Reference Terminology" /></code><text><reference nullFlavor="UNK" /></text><!-- 14.04-VITAL SIGN RESULT STATUS, REQUIRED, Static value of completed --><statusCode code="completed" /><!-- 14.02-VITAL SIGN RESULT DATE/TIME, REQURIED --><effectiveTime value="20240829125752" /><!--
              14.05-VITAL SIGN RESULT VALUE, CONDITIONALLY REQUIRED when
              moodCode=EVN
            --><!-- 14.05-VITAL SIGN RESULT VALUE with Unit of Measure --><value xsi:type="PQ" nullFlavor="NA" value="77"><translation code="" codeSystem="2.16.840.1.113883.4.349" codeSystemName="Department of Veterans Affairs VistA" displayName="" /></value><interpretationCode nullFlavor="NI" /><!--
              14.06-VITAL SIGN RESULT INTERPRETATION, Optional, HL7 Result
              Normalcy Status Value Set
            --><!--
              14.06-VITAL SIGN RESULT INTERPRETATION, Removed b/c data not
              yet available via VA VistA RPCs
            --><!-- 14.07-VITAL SIGN RESULT REFERENCE RANGE, Optional, --><!--
              14.07-VITAL SIGN RESULT REFERENCE RANGE, Removed b/c data not
              yet available via VA VistA RPCs
            --></observation></component><component><observation classCode="OBS" moodCode="EVN"><templateId root="2.16.840.1.113883.10.20.22.4.27" extension="2014-06-09" /><!--CCD Vital Signs Observation ID as Section LOINC Code.StationNbr.GroupID.ExternalId.ObservationCode--><id root="2.16.840.1.113883.4.349" extension="8716-3.442.3240829.125752..9279-1" /><!--14.03-VITAL SIGN RESULT TYPE, REQUIRED, LOINC --><code codeSystem="2.16.840.1.113883.6.1" codeSystemName="LOINC" code="9279-1" displayName="Resp rate"><originalText>RESPIRATION</originalText><translation code="4688725" displayName="RESPIRATION" codeSystem="2.16.840.1.113883.6.233" codeSystemName="VHA Enterprise Reference Terminology" /></code><text><reference nullFlavor="UNK" /></text><!-- 14.04-VITAL SIGN RESULT STATUS, REQUIRED, Static value of completed --><statusCode code="completed" /><!-- 14.02-VITAL SIGN RESULT DATE/TIME, REQURIED --><effectiveTime value="20240829125752" /><!--
              14.05-VITAL SIGN RESULT VALUE, CONDITIONALLY REQUIRED when
              moodCode=EVN
            --><!-- 14.05-VITAL SIGN RESULT VALUE with Unit of Measure --><value xsi:type="PQ" nullFlavor="NA" value="22"><translation code="" codeSystem="2.16.840.1.113883.4.349" codeSystemName="Department of Veterans Affairs VistA" displayName="" /></value><interpretationCode nullFlavor="NI" /><!--
              14.06-VITAL SIGN RESULT INTERPRETATION, Optional, HL7 Result
              Normalcy Status Value Set
            --><!--
              14.06-VITAL SIGN RESULT INTERPRETATION, Removed b/c data not
              yet available via VA VistA RPCs
            --><!-- 14.07-VITAL SIGN RESULT REFERENCE RANGE, Optional, --><!--
              14.07-VITAL SIGN RESULT REFERENCE RANGE, Removed b/c data not
              yet available via VA VistA RPCs
            --></observation></component></organizer></entry></section></component><!-- ************************* STANDALONE NOTE SECTIONS BELOW *************** --><component><!--Consultation Notes --><section><templateId root="2.16.840.1.113883.10.20.22.2.65" extension="2016-11-01" /><code code="11488-4" codeSystem="2.16.840.1.113883.6.1" codeSystemName="LOINC" displayName="Consultation Note" /><title>Consult Notes</title><text><!-- Start Consult Notes Narrative --><paragraph><content styleCode="Bold">Consult Notes</content></paragraph><!-- Consult notes begin --><paragraph>
                          The included Consult Notes are from the last 18 months, are available thirty-six (36) hours after completion, and include a maximum of the 5 most recent notes. The data comes from all VA treatment facilities. Note that Compensation &amp; Pension Notes are available 30 days after completion. Consult Notes (including Compensation and Pension exam notes) from the new VA electronic health record are not included.
                        </paragraph><table><thead><tr><th>Date/Time</th><th>Consult Note with Text</th><th>Provider</th><th>Source</th></tr></thead><tbody><tr><td><content ID="noteDateTime1">Aug 21, 2024 12:00 PM</content></td><td><content ID="noteEncounterDescription1">EDUCATION:<br /> LOCAL TITLE: NUTRITION CLASS - SATP EDUCATION CONSULT REPORT    <br />STANDARD TITLE: NUTRITION EDUCATION NOTE                        <br />DATE OF NOTE: AUG 21, 2024@12:00     ENTRY DATE: AUG 21, 2024@14:38:20      <br />      AUTHOR: GOODMAN,KEOLA        EXP COSIGNER:                           <br />     URGENCY:                            STATUS: COMPLETED                     <br /><br />   VistA Imaging - Scanned Document<br /><br /> <br />                           *** SCANNED DOCUMENT ***<br />                            SIGNATURE NOT REQUIRED<br /> <br /> <br />  Electronically Filed: 08/21/2024<br />                    by: KEOLA GOODMAN<br />                        <br /> <br /><br /><br /></content></td><td><content ID="noteProvider1">GOODMAN,KEOLA</content></td><td><content ID="noteSource1">CHEYENNE VAMC</content></td></tr></tbody></table><!-- Condensed Consult notes begin title only --><!-- Stop Consult Notes Narrative --></text><entry><!--Note Activity Entry --><act classCode="ACT" moodCode="EVN"><templateId root="2.16.840.1.113883.10.20.22.4.202" extension="2016-11-01" /><code code="34109-9" codeSystem="2.16.840.1.113883.6.1" codeSystemName="LOINC" displayName="Note"><translation code="11488-4" codeSystem="2.16.840.1.113883.6.1" codeSystemName="LOINC" displayName="Consultation Note" /></code><text><reference value="#noteEncounterDescription1" /></text><statusCode code="completed" /><!--Clinically relevant time of the note --><effectiveTime value="20240821120000" /><author><templateId root="2.16.840.1.113883.10.20.22.4.119" /><!--Time note was actually written--><time value="20240821120000" /><assignedAuthor><id nullFlavor="NI" /><assignedPerson><name>GOODMAN,KEOLA</name></assignedPerson><representedOrganization><id root="2.16.840.1.113883.4.349" extension="442" /><name>CHEYENNE VAMC</name></representedOrganization></assignedAuthor></author></act></entry></section></component><component><!--History and Physical Notes--><section nullFlavor="NI"><templateId root="2.16.840.1.113883.10.20.22.2.65" extension="2016-11-01" /><code code="34117-2" codeSystem="2.16.840.1.113883.6.1" codeSystemName="LOINC" displayName="HandP Note" /><title>History and Physical Notes</title><text>No Data Provided for This Section</text></section></component><component><!-- Discharge Summaries Section --><section nullFlavor="NI"><templateId root="2.16.840.1.113883.10.20.22.2.65" extension="2016-11-01" /><code code="18842-5" codeSystem="2.16.840.1.113883.6.1" codeSystemName="LOINC" displayName="Discharge Note" /><title>Discharge Summaries</title><text>No Data Provided for This Section</text></section></component><component><!--Radiology Studies--><section nullFlavor="NI"><templateId root="2.16.840.1.113883.10.20.22.2.65" extension="2016-11-01" /><code code="18726-0" codeSystem="2.16.840.1.113883.6.1" codeSystemName="LOINC" displayName="Radiology Reports" /><title>Radiology Reports</title><text>No Data Provided for This Section</text></section></component><component><!--Pathology Studies--><section nullFlavor="NI"><templateId root="2.16.840.1.113883.10.20.22.2.65" extension="2016-11-01" /><code code="27898-6" codeSystem="2.16.840.1.113883.6.1" codeSystemName="LOINC" displayName="Pathology Reports" /><title>Pathology Reports</title><text>No Data Provided for This Section</text></section></component><component><!-- Clinical Procedure Notes --><section nullFlavor="NI"><templateId root="2.16.840.1.113883.10.20.22.2.65" extension="2016-11-01" /><code code="28570-0" codeSystem="2.16.840.1.113883.6.1" codeSystemName="LOINC" displayName="Procedure Note" /><title>Clinical Procedure Notes</title><text>No Data Provided for This Section</text></section></component></structuredBody></component></ClinicalDocument>
    `,
  );
};

module.exports = {
  generateCCD,
  downloadCCD,
};
