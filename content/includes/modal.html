{% comment %}
This modal is used on /education/apply-for-education-benefits/
and should be extended as needed around the non-react vets.gov
content.
{% endcomment %}
<section class="va-modal va-modal-split csp-inline-patch-modal" id="va-modal" role="alertdialog" tabIndex="-1">
  <div class="va-modal-inner">
    <h3 class="va-modal-title">Which form do you need to use?</h3>

    <div class="va-modal-body rx-modal-body">

      <div class="va-modal-split-container">
        <div class="va-modal-split-left">
          <h5 class="va-modal-split-title">Servicemembers and Veterans applying for education benefits</h5>
          <div class="show-for-small-only">
            <a href="javascript:void(0)" class="va-modal-close-button usa-button-primary usa-button-big">Apply with Form 22-1990</a>
          </div>
        </div>
        <div class="va-modal-split-divider"></div>
        <div class="va-modal-split-right">
          <span>If you are:</span>
          <ul class="va-modal-split-list">
            <li>A student who wants to <b>change programs or schools</b></li>
            <li>A spouse or dependent</li>
            <li>A candidate for <b>National Call to Service</b></li>
          </ul>
          <div class="show-for-small-only">
            <a href="https://www.ebenefits.va.gov/ebenefits/vonapp" class="usa-button-primary usa-button-big usa-button-outline">Apply on eBenefits <span class="exit-icon">&nbsp;</span></a>
          </div>
        </div>
      </div>

      <!-- Desktop HTML buttons -->
      <div class="show-for-medium-up">
        <div class="va-modal-split-container">
          <div class="va-modal-split-left">
            <a href="javascript:void(0)" class="va-modal-close-button usa-button-primary usa-button-big">Apply with Form 22-1990</a>
          </div>
          <div class="va-modal-split-divider"></div>
          <div class="va-modal-split-right">
            <a href="https://www.ebenefits.va.gov/ebenefits/vonapp" class="usa-button-primary usa-button-big usa-button-outline">Apply on eBenefits <span class="exit-icon">&nbsp;</span></a>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', () => {
  // Handle modal closing and opening
  const modal = document.querySelector('#va-modal');

  function open() {
    modal.style.display = 'block';
    modal.focus();
  }

  if (document.location.hash === '#modal'){
    open();
  }

  const closeButtons = document.querySelectorAll('.va-modal-close-button');

  function closeModal() {
    if(window.history.pushState) {
      window.history.pushState('', '/', window.location.pathname)
    } else {
      window.location.hash = '';
    }
    modal.style.display = 'none';
    querySelector('#content').focus();
  }

  Array.from(closeButtons).map((cb) => {
    cb.addEventListener('click', closeModal);
  });
});
</script>
